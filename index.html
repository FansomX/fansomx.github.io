<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Fan Xiao | PhD student · Medical Physics · AI</title>
  <meta name="description" content="Fan Xiao — Medical Physics PhD · AI Researcher. Dose calculation, BEV↔patient interpolation, ms-level kernels for ART.">
  <meta name="theme-color" content="#0a192f">
  <meta property="og:title" content="Fan Xiao — Medical Physics · AI">
  <meta property="og:description" content="Dose calc · BEV↔patient · ms-level kernels for ART.">
  <meta property="og:type" content="website">

  <style>
    :root{
      --dark:#0a192f;--navy:#0f203d;--navy2:#233554;
      --slate:#8892b0;--slate2:#a8b2d1;--slate3:#ccd6f6;
      --white:#e6f1ff;--acc:#64ffda;--violet:#a78bfa;
      --photon:#4ade80;--electron:#f59e0b;--neutron:#ec4899;
    }
    html{scroll-behavior:smooth}
    body{
      margin:0;color:var(--slate);background:var(--dark);
      font:16px/1.75 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      -webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;
      overflow-x: hidden;
    }

    /* 顶部阅读进度条 */
    #progress{position:fixed;top:0;left:0;height:3px;width:0;background:linear-gradient(90deg,var(--photon),var(--acc));z-index:9999;transition:width .1s}

    /* 粒子系统背景 */
    .particle-container{position:fixed;inset:0;z-index:-5;pointer-events:none}
    .particle{position:absolute;border-radius:50%;pointer-events:none;
      box-shadow:0 0 4px currentColor;animation:float 8s linear infinite}
    .particle.photon{background:var(--photon);width:2px;height:2px;
      animation:photon-path 12s linear infinite}
    .particle.electron{background:var(--electron);width:3px;height:3px;
      animation:electron-spiral 15s ease-in-out infinite}
    .particle.neutron{background:var(--neutron);width:2.5px;height:2.5px;
      animation:neutron-scatter 10s linear infinite}

    @keyframes photon-path{
      0%{transform:translate(-20px,-20px) rotate(0deg);opacity:0}
      10%{opacity:0.6}
      90%{opacity:0.6}
      100%{transform:translate(calc(100vw + 20px),calc(100vh + 20px)) rotate(360deg);opacity:0}
    }
    @keyframes electron-spiral{
      0%{transform:translate(0,100vh) rotate(0deg);opacity:0}
      10%{opacity:0.4}
      50%{transform:translate(50vw,50vh) rotate(1800deg);opacity:0.7}
      90%{opacity:0.4}
      100%{transform:translate(100vw,0) rotate(3600deg);opacity:0}
    }
    @keyframes neutron-scatter{
      0%{transform:translate(50vw,0) rotate(0deg);opacity:0}
      20%{opacity:0.5}
      40%{transform:translate(20vw,30vh) rotate(180deg)}
      60%{transform:translate(80vw,70vh) rotate(270deg)}
      80%{opacity:0.5}
      100%{transform:translate(50vw,100vh) rotate(360deg);opacity:0}
    }

    /* DNA螺旋装饰 */
    .dna-helix{position:fixed;right:5%;top:20%;width:2px;height:60vh;z-index:-4;pointer-events:none}
    .dna-strand{position:absolute;width:100%;height:100%;
      background:linear-gradient(to bottom,transparent,var(--acc),transparent);
      animation:dna-rotate 20s linear infinite;transform-origin:center}
    .dna-strand:nth-child(2){animation-delay:-10s;transform:rotateY(180deg)}

    @keyframes dna-rotate{
      from{transform:rotateY(0deg) rotateZ(0deg)}
      to{transform:rotateY(360deg) rotateZ(360deg)}
    }

    /* 剂量热图效果 */
    .dose-heatmap{position:fixed;left:0;top:0;width:100%;height:100%;z-index:-6;
      background:
        radial-gradient(circle at 20% 30%, rgba(244,63,94,0.03), transparent 40%),
        radial-gradient(circle at 80% 70%, rgba(59,130,246,0.03), transparent 40%),
        radial-gradient(circle at 50% 50%, rgba(16,185,129,0.02), transparent 50%);
      animation:dose-pulse 8s ease-in-out infinite alternate}

    @keyframes dose-pulse{
      0%{opacity:0.3;transform:scale(1)}
      100%{opacity:0.6;transform:scale(1.02)}
    }

    /* 柔光背景 + 细网格 + 改进的颗粒 */
    .bg-blobs{position:fixed;inset:-40%;z-index:-3;
      background:
       radial-gradient(42vmax 42vmax at 18% 24%, rgba(100,255,218,.09), transparent),
       radial-gradient(40vmax 40vmax at 84% 72%, rgba(167,139,250,.10), transparent),
       radial-gradient(35vmax 35vmax at 60% 10%, rgba(74,222,128,.06), transparent);
      animation:blob 14s ease-in-out infinite alternate}
    .bg-grid{position:fixed;inset:0;z-index:-2;
      background:
        linear-gradient(transparent 95%, rgba(255,255,255,.04) 95%),
        linear-gradient(90deg, transparent 95%, rgba(255,255,255,.04) 95%);
      background-size: 24px 24px;
      mask-image: radial-gradient(60vmax 60vmax at 50% 50%, #000 60%, transparent 100%);
      pointer-events:none}
    .grain{position:fixed;inset:-50%;z-index:-1;opacity:.04;pointer-events:none;
      background-image: repeating-conic-gradient(from 0deg, #000 0 1deg, transparent 1deg 3deg);
      filter: contrast(150%) blur(.4px); animation:grain 8s steps(20) infinite}
    @keyframes blob{to{transform:translate3d(3%,-3%,0) scale(1.02)}}
    @keyframes grain{to{transform:translate3d(-5%, -7%, 0)}}

    /* 布局 */
    .container{display:flex;max-width:1400px;margin:0 auto;position:relative}
    .left{width:45%;height:100vh;position:sticky;top:0;
      display:flex;flex-direction:column;justify-content:space-between;
      padding:60px;box-sizing:border-box;
      background:linear-gradient(135deg,rgba(255,255,255,.03),rgba(255,255,255,.01))}
    .right{width:55%;padding:60px;box-sizing:border-box}

    /* 文字与细节 */
    h1{color:var(--white);font-size:48px;margin:0;letter-spacing:.2px;
      text-shadow:0 0 20px rgba(100,255,218,.3)}
    h2{color:var(--slate3);font-size:22px;margin:8px 0 0;
      background:linear-gradient(90deg,var(--slate3),var(--acc));
      background-clip:text;-webkit-background-clip:text;-webkit-text-fill-color:transparent}
    .subtitle{max-width:460px;margin:16px 0 0;position:relative}
    .subtitle::before{content:"";position:absolute;left:-20px;top:0;width:3px;height:100%;
      background:linear-gradient(180deg,var(--photon),var(--acc),var(--violet));
      border-radius:2px;opacity:0.6}
    
    .avatar{width:104px;height:104px;border-radius:50%;object-fit:cover;
      border:2px solid var(--navy2);margin:18px 0;
      box-shadow:0 0 0 4px rgba(100,255,218,.1), 0 6px 18px -8px rgba(0,0,0,.6);
      transition:all .3s ease}
    .avatar:hover{transform:scale(1.05) rotate(2deg);
      box-shadow:0 0 0 6px rgba(100,255,218,.2), 0 12px 36px -12px rgba(0,0,0,.8)}

    /* 链接通用下划线动画 */
    a{color:var(--acc);text-decoration:none;position:relative}
    a::after{content:"";position:absolute;left:0;bottom:-2px;height:2px;width:100%;
      background:linear-gradient(90deg,var(--acc),var(--violet));
      transform:scaleX(0);transform-origin:left;transition:transform .22s ease}
    a:hover::after{transform:scaleX(1)}

    /* 导航 */
    .nav{list-style:none;padding:0;margin:24px 0 0}
    .nav li{margin:12px 0}
    .nav a{color:var(--slate);font-weight:600;display:flex;align-items:center;gap:12px;
      padding:8px 0;transition:all .2s ease}
    .line{width:28px;height:2px;background:var(--slate);transition:all .3s ease;
      position:relative;overflow:hidden}
    .line::before{content:"";position:absolute;left:-100%;top:0;width:100%;height:100%;
      background:linear-gradient(90deg,transparent,var(--acc),transparent);
      transition:left .4s ease}
    .nav a:hover,.nav a.active{color:var(--white);transform:translateX(4px)}
    .nav a:hover .line,.nav a.active .line{width:58px;background:var(--white)}
    .nav a:hover .line::before,.nav a.active .line::before{left:0}

    /* 社交按钮：改进的玻璃效果 + 物理反馈 */
    .social{list-style:none;padding:0;display:flex;gap:14px;flex-wrap:wrap}
    .chip{
      display:inline-block;padding:10px 16px;border-radius:999px;color:var(--slate3);
      background:linear-gradient(135deg,rgba(255,255,255,.08),rgba(255,255,255,.02));
      border:1px solid rgba(255,255,255,.15);backdrop-filter:blur(10px);
      box-shadow:
        inset 0 1px 0 rgba(255,255,255,.1),
        0 4px 12px -8px rgba(0,0,0,.4),
        0 0 0 0 rgba(100,255,218,.0);
      transition:all .3s cubic-bezier(0.4,0,0.2,1);
      will-change:transform; user-select:none; position:relative; overflow:hidden
    }
    .chip::before{content:"";position:absolute;inset:0;
      background:linear-gradient(135deg,rgba(100,255,218,.1),rgba(167,139,250,.1));
      opacity:0;transition:opacity .3s ease}
    .chip:hover{transform:translateY(-4px) scale(1.02);border-color:rgba(255,255,255,.3);
      box-shadow:0 8px 25px -8px rgba(0,0,0,.6), 0 0 0 2px rgba(100,255,218,.2);
      color:var(--white)}
    .chip:hover::before{opacity:1}

    /* 右侧内容 + 进场动画 + 改进的3D悬停 */
    main{counter-reset:sec}
    section{margin:120px 0;opacity:0;transform:translateY(30px);
      transition:opacity .6s cubic-bezier(0.4,0,0.2,1),transform .6s cubic-bezier(0.4,0,0.2,1)}
    section.is-visible{opacity:1;transform:none}
    .title{font-size:22px;color:var(--slate3);margin:0 0 28px;display:flex;align-items:center;gap:12px;
      counter-increment:sec;position:relative}
    .title::before{content:counter(sec, decimal-leading-zero) ".";color:var(--acc);
      font-family:"SF Mono","Fira Code","Fira Mono","Roboto Mono",monospace;
      font-weight:bold;text-shadow:0 0 8px rgba(100,255,218,.4)}
    .title::after{content:"";position:absolute;right:0;top:50%;width:100px;height:1px;
      background:linear-gradient(90deg,var(--acc),transparent);transform:translateY(-50%)}
    
    .card{
      background:linear-gradient(135deg,rgba(255,255,255,.06),rgba(255,255,255,.02));
      border:1px solid rgba(255,255,255,.15);border-radius:16px;padding:24px;margin-bottom:16px;
      backdrop-filter:blur(10px);transform-style:preserve-3d;will-change:transform, box-shadow;
      box-shadow:
        0 8px 32px -16px rgba(2,12,27,.6),
        inset 0 1px 0 rgba(255,255,255,.08);
      position:relative;overflow:hidden;transition:all .3s ease
    }
    .card::before{content:"";position:absolute;top:0;left:0;right:0;height:1px;
      background:linear-gradient(90deg,transparent,var(--acc),transparent);opacity:0;
      transition:opacity .3s ease}
    .card:hover{transform:perspective(1000px) rotateX(2deg) rotateY(-2deg) translateY(-6px);
      box-shadow:0 20px 60px -24px rgba(2,12,27,.8), 0 0 0 1px rgba(100,255,218,.1);
      border-color:rgba(255,255,255,.25)}
    .card:hover::before{opacity:1}
    .card h3{margin:0 0 12px;font-size:18px;color:var(--white)}
    .card h3 a{background:linear-gradient(90deg,var(--white),var(--acc));
      background-clip:text;-webkit-background-clip:text;-webkit-text-fill-color:transparent}
    .muted{color:var(--slate2);font-size:14px;font-family:"SF Mono","Fira Code",monospace}

    /* 返回顶部按钮 */
    .to-top{
      position:fixed;right:20px;bottom:20px;z-index:30;opacity:0;pointer-events:none;
      background:rgba(255,255,255,.08);color:var(--slate3);border:1px solid rgba(255,255,255,.2);
      padding:12px 16px;border-radius:12px;backdrop-filter:blur(12px);
      transition:all .3s cubic-bezier(0.4,0,0.2,1); transform:translateY(10px) scale(0.9)
    }
    .to-top.show{opacity:1;pointer-events:auto;transform:none}
    .to-top:hover{transform:translateY(-3px) scale(1.05);
      box-shadow:0 8px 25px -8px rgba(0,0,0,.6); color:var(--acc)}

    /* 医学物理数据可视化元素 */
    .dose-indicator{position:absolute;top:20px;right:20px;width:80px;height:4px;
      background:linear-gradient(90deg,#22c55e,#eab308,#ef4444);border-radius:2px;opacity:0.6}
    .dose-indicator::after{content:"Dose Profile";position:absolute;top:-20px;right:0;
      font-size:10px;color:var(--slate2);font-family:"SF Mono",monospace}

    footer{text-align:center;color:var(--slate2);
      font:12px "SF Mono","Fira Code","Fira Mono","Roboto Mono",monospace;margin:100px 0 40px;
      border-top:1px solid rgba(255,255,255,.1);padding-top:40px}

    /* 低运动偏好 */
    @media (prefers-reduced-motion:reduce){
      *{animation:none !important;transition:none !important;scroll-behavior:auto !important}
      .particle{display:none}
    }
    @media (max-width:1080px){
      .container{flex-direction:column}
      .left,.right{width:100%;position:static;height:auto;padding:40px}
      .nav{display:none}
      .dna-helix{display:none}
      h1{font-size:36px}
    }
  </style>
</head>
<body>
  <div id="progress"></div>
  <div class="particle-container" id="particles"></div>
  <div class="dose-heatmap"></div>
  <div class="dna-helix">
    <div class="dna-strand"></div>
    <div class="dna-strand"></div>
  </div>
  <div class="bg-blobs"></div>
  <div class="bg-grid"></div>
  <div class="grain"></div>

  <div class="container">
    <aside class="left">
      <div>
        <h1>Fan Xiao</h1>
        <h2>Medical Physics PhD · AI Researcher</h2>
        <img src="assets/Fan.jpeg" alt="Fan Xiao" class="avatar">
        <div class="dose-indicator"></div>
        <p class="subtitle">Photon segment dose prediction · BEV↔patient interpolation · ms-level kernels for online ART. Open-source & reproducibility first.</p>

        <ul class="nav">
          <li><a class="nav-link active" href="#about"><span class="line"></span><span>关于</span></a></li>
          <li><a class="nav-link" href="#projects"><span class="line"></span><span>项目</span></a></li>
          <li><a class="nav-link" href="#publications"><span class="line"></span><span>出版物</span></a></li>
          <li><a class="nav-link" href="#contact"><span class="line"></span><span>联系</span></a></li>
        </ul>
      </div>

      <ul class="social">
        <li><a class="chip" href="https://scholar.google.de/citations?hl=de&pli=1&user=jhjXYpMAAAAJ" target="_blank" aria-label="Scholar">Scholar</a></li>
        <li><a class="chip" href="https://github.com/FansomX" target="_blank" aria-label="GitHub">GitHub</a></li>
        <li><a class="chip" id="copyMail" href="mailto:Fan.Xiao@med.uni-muenchen.de" aria-label="Email">Email</a></li>
      </ul>
    </aside>

    <main class="right">
      <section id="about" class="fade-in">
        <h3 class="title">关于我 (About)</h3>
        <div class="card">
          <p>在慕尼黑从事医学物理与计算成像研究。目标：把放疗剂量计算做得又快又稳，服务在线自适应工作流。专注于光子段剂量预测、BEV与患者空间插值，以及毫秒级计算核心的开发。</p>
          <p class="muted">研究兴趣：Monte Carlo simulation · Deep learning · Adaptive radiotherapy</p>
        </div>
      </section>

      <section id="projects" class="fade-in">
        <h3 class="title">项目 (Projects)</h3>
        <article class="card">
          <h3><a href="https://github.com/FansomX/conv-lstm-bev-dose" target="_blank">ConvLSTM BEV Dose Prediction</a></h3>
          <p>从射束眼视图(BEV)预测三维剂量分布。基于ConvLSTM架构，结合时空特征学习，实现快速准确的剂量计算。</p>
          <p class="muted">PyTorch · CuPy · CUDA acceleration</p>
        </article>
        <article class="card">
          <h3><a href="https://github.com/FansomX/geant4-segment-sim" target="_blank">Geant4 Segment Simulator</a></h3>
          <p>光子段蒙特卡洛模拟系统，支持多种粒子类型的传输计算和剂量累积分析。提供GPU加速的并行计算能力。</p>
          <p class="muted">C++ · Geant4 · ITK · OpenMP</p>
        </article>
        <article class="card">
          <h3><a href="https://github.com/FansomX/online-art-pipeline" target="_blank">Adaptive ART Pipeline</a></h3>
          <p>在线自适应放疗的高性能计算管道。毫秒级响应的计算内核，支持实时图像配准和剂量重计算。</p>
          <p class="muted">CUDA · HPC · Real-time processing</p>
        </article>
      </section>

      <section id="publications" class="fade-in">
        <h3 class="title">出版物 (Publications)</h3>
        <div class="card">
          <h3><a href="#" target="_blank">Unified comparative protocol for photon segment dose prediction</a></h3>
          <p>建立了光子段剂量预测的统一比较协议，为不同算法提供标准化评估框架。</p>
          <p class="muted">Physica Medica, 2025 (under review)</p>
        </div>
        <div class="card">
          <h3><a href="#" target="_blank">Millisecond kernels for adaptive radiotherapy</a></h3>
          <p>开发了面向自适应放疗的毫秒级计算核心，显著提升在线治疗计划的计算效率。</p>
          <p class="muted">Medical Physics, 2024</p>
        </div>
      </section>

      <section id="contact" class="fade-in">
        <h3 class="title">联系 (Contact)</h3>
        <div class="card">
          <p>Email：<a id="mail" href="mailto:Fan.Xiao@med.uni-muenchen.de">Fan.Xiao@med.uni-muenchen.de</a></p>
          <p>Location: Munich, Germany</p>
          <p class="muted" id="toast" style="opacity:0;transition:opacity .2s">已复制邮箱地址 ✓</p>
        </div>
      </section>

      <footer>© <span id="y"></span> Fan Xiao · Munich · Advancing Medical Physics Through AI</footer>
    </main>
  </div>

  <!-- 返回顶部 -->
  <a href="#top" class="to-top" id="toTop" aria-label="Back to top">↑ Top</a>

  <script>
    // 年份
    document.getElementById('y').textContent = new Date().getFullYear();

    // 粒子系统初始化
    function initParticles() {
      const container = document.getElementById('particles');
      const particleTypes = ['photon', 'electron', 'neutron'];
      
      function createParticle(type) {
        const particle = document.createElement('div');
        particle.className = `particle ${type}`;
        
        // 随机起始位置和延迟
        const delay = Math.random() * 8;
        particle.style.animationDelay = `-${delay}s`;
        
        if (type === 'photon') {
          particle.style.left = `${Math.random() * -50}px`;
          particle.style.top = `${Math.random() * -50}px`;
        } else if (type === 'electron') {
          particle.style.left = `${Math.random() * 20}px`;
          particle.style.top = '100vh';
        } else { // neutron
          particle.style.left = '50vw';
          particle.style.top = `${Math.random() * -50}px`;
        }
        
        container.appendChild(particle);
        
        // 粒子生命周期管理
        setTimeout(() => {
          if (particle.parentNode) {
            particle.remove();
          }
        }, (type === 'electron' ? 15 : type === 'photon' ? 12 : 10) * 1000 + delay * 1000);
      }
      
      // 定期生成粒子
      setInterval(() => {
        if (Math.random() < 0.7) {
          const type = particleTypes[Math.floor(Math.random() * particleTypes.length)];
          createParticle(type);
        }
      }, 2000);
      
      // 初始粒子
      for (let i = 0; i < 8; i++) {
        setTimeout(() => {
          const type = particleTypes[Math.floor(Math.random() * particleTypes.length)];
          createParticle(type);
        }, i * 500);
      }
    }
    
    // 延迟启动粒子系统以避免影响页面加载
    setTimeout(initParticles, 1000);

    // 阅读进度条
    addEventListener('scroll',()=>{
      const h=document.documentElement;
      const p=100*h.scrollTop/(h.scrollHeight-h.clientHeight);
      document.getElementById('progress').style.width=p+'%';
      
      // 返回顶部显隐
      const btn=document.getElementById('toTop');
      if(p>10){btn.classList.add('show')}else{btn.classList.remove('show')}
    },{passive:true});

    // 分节进入动画 + 导航高亮
    const secs=[...document.querySelectorAll('section[id]')];
    const links=[...document.querySelectorAll('.nav-link')];
    const map=new Map(links.map(a=>[a.getAttribute('href').slice(1),a]));
    let active='about';
    const io=new IntersectionObserver(es=>{
      es.forEach(e=>{
        if(e.isIntersecting){ 
          active=e.target.id; 
          e.target.classList.add('is-visible'); 
        }
      });
      map.forEach(a=>a.classList.toggle('active', a.getAttribute('href')==="#"+active));
    },{threshold:.35});
    secs.forEach(s=>io.observe(s));

    // 改进的磁性悬停效果
    function magnetic(el, strength=18){
      let isHovering = false;
      let animFrame = null;
      
      el.addEventListener('mouseenter', () => { isHovering = true; });
      el.addEventListener('mouseleave', () => { 
        isHovering = false;
        cancelAnimationFrame(animFrame);
        animFrame = requestAnimationFrame(()=>{
          el.style.transform='';
        });
      });
      
      el.addEventListener('mousemove',e=>{
        if (!isHovering) return;
        
        const b=el.getBoundingClientRect();
        const x=(e.clientX - (b.left+b.width/2))/ (b.width/2);
        const y=(e.clientY - (b.top+b.height/2))/ (b.height/2);
        
        cancelAnimationFrame(animFrame);
        animFrame = requestAnimationFrame(() => {
          el.style.transform=`translate(${x*strength}px, ${y*strength}px)`;
        });
      });
    }
    
    // 应用磁性效果到相关元素
    document.querySelectorAll('.chip').forEach(ch=>magnetic(ch,8));
    
    // 改进的3D卡片悬停
    document.querySelectorAll('.card').forEach(c=>{
      let isHovering = false;
      let animFrame = null;
      
      c.addEventListener('mouseenter', () => { isHovering = true; });
      c.addEventListener('mouseleave', () => { 
        isHovering = false;
        cancelAnimationFrame(animFrame);
        c.style.transform='';
      });
      
      c.addEventListener('mousemove',e=>{
        if (!isHovering) return;
        
        const b=c.getBoundingClientRect();
        const rx=((e.clientY-b.top)/b.height-.5)*-3;
        const ry=((e.clientX-b.left)/b.width-.5)*3;
        
        cancelAnimationFrame(animFrame);
        animFrame = requestAnimationFrame(() => {
          c.style.transform=`perspective(1000px) rotateX(${rx}deg) rotateY(${ry}deg) translateY(-2px)`;
        });
      });
    });

    // 复制邮箱提示
    const copyMail=document.getElementById('copyMail');
    copyMail?.addEventListener('click',e=>{
      e.preventDefault();
      const mail='Fan.Xiao@med.uni-muenchen.de';
      try{
        navigator.clipboard.writeText(mail);
        const t=document.getElementById('toast'); 
        t.style.opacity=1;
        setTimeout(()=>t.style.opacity=0,2000);
      }catch(err){
        // 备用复制方法
        const textArea = document.createElement('textarea');
        textArea.value = mail;
        document.body.appendChild(textArea);
        textArea.select();
        document.execCommand('copy');
        document.body.removeChild(textArea);
        
        const t=document.getElementById('toast'); 
        t.style.opacity=1;
        setTimeout(()=>t.style.opacity=0,2000);
      }
    });

    // 键盘辅助：按 g 打开"快速跳转"，按 h 显示帮助
    addEventListener('keydown',e=>{
      if(e.key.toLowerCase()==='g'){
        const order=['about','projects','publications','contact'];
        const i=order.indexOf(active);
        const nxt=order[(i+1)%order.length];
        document.getElementById(nxt).scrollIntoView({behavior:'smooth',block:'start'});
      }
      if(e.key.toLowerCase()==='h' && e.ctrlKey){
        e.preventDefault();
        alert('快捷键：G - 跳转到下一节 | Ctrl+H - 显示帮助');
      }
    });

    // 性能优化：减少重绘
    let ticking = false;
    function updateOnScroll() {
      const h = document.documentElement;
      const scrolled = h.scrollTop;
      const height = h.scrollHeight - h.clientHeight;
      const progress = Math.min((scrolled / height) * 100, 100);
      
      document.getElementById('progress').style.width = progress + '%';
      
      // 视差效果（轻微）
      const blobs = document.querySelector('.bg-blobs');
      if (blobs) {
        blobs.style.transform = `translate3d(0, ${scrolled * -0.1}px, 0)`;
      }
      
      ticking = false;
    }

    addEventListener('scroll', () => {
      if (!ticking) {
        requestAnimationFrame(updateOnScroll);
        ticking = true;
      }
    }, { passive: true });

    // 预加载关键资源
    const preloadLinks = [
      'https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap'
    ];
    
    preloadLinks.forEach(href => {
      const link = document.createElement('link');
      link.rel = 'preload';
      link.as = 'style';
      link.href = href;
      document.head.appendChild(link);
    });

    // 主题切换功能（隐藏功能，按 't' 键激活）
    let isDarkMode = true;
    addEventListener('keydown', e => {
      if (e.key.toLowerCase() === 't' && e.shiftKey) {
        isDarkMode = !isDarkMode;
        document.documentElement.style.filter = isDarkMode ? 'none' : 'invert(1) hue-rotate(180deg)';
        
        // 显示切换提示
        const themeToast = document.createElement('div');
        themeToast.textContent = `已切换到${isDarkMode ? '深色' : '浅色'}主题`;
        themeToast.style.cssText = `
          position: fixed; top: 20px; right: 20px; z-index: 9999;
          background: rgba(0,0,0,0.8); color: white; padding: 12px 16px;
          border-radius: 8px; font-size: 14px; pointer-events: none;
          transform: translateY(-20px); opacity: 0;
          transition: all 0.3s ease;
        `;
        document.body.appendChild(themeToast);
        
        requestAnimationFrame(() => {
          themeToast.style.transform = 'translateY(0)';
          themeToast.style.opacity = '1';
        });
        
        setTimeout(() => {
          themeToast.style.opacity = '0';
          setTimeout(() => themeToast.remove(), 300);
        }, 2000);
      }
    });

    // 错误处理和优雅降级
    window.addEventListener('error', e => {
      console.warn('页面出现错误，但不影响基本功能:', e.message);
    });

    // 页面可见性API - 暂停动画以节省资源
    document.addEventListener('visibilitychange', () => {
      const particles = document.querySelectorAll('.particle');
      particles.forEach(p => {
        p.style.animationPlayState = document.hidden ? 'paused' : 'running';
      });
    });
  </script>
</body>
</html>
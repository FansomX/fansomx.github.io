<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Fan Xiao | Medical Physics · AI</title>
<meta name="theme-color" content="#0a192f">
<link rel="icon" href="assets/FX.svg" type="image/svg+xml">
<style>
:root{--dark:#0a192f;--navy2:#233554;--slate:#8892b0;--slate2:#a8b2d1;--slate3:#ccd6f6;--white:#e6f1ff;--acc:#64ffda;--violet:#a78bfa;--photon:#4ade80}
html{scroll-behavior:smooth}
body{margin:0;background:var(--dark);color:var(--slate);font:16px/1.7 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;overflow-x:hidden}

/* 顶部进度条 */
#progress{position:fixed;top:0;left:0;height:3px;width:0;background:linear-gradient(90deg,var(--photon),var(--acc));z-index:9999}

/* 粒子画布在最底层 */
#fx_particles{position:fixed;inset:0;z-index:-3;background:radial-gradient(1200px 600px at 70% 10%,rgba(100,255,218,.07),transparent 60%)}
.bg-grid{position:fixed;inset:0;z-index:-2;background:
 linear-gradient(transparent 95%, rgba(255,255,255,.04) 95%),
 linear-gradient(90deg, transparent 95%, rgba(255,255,255,.04) 95%);
background-size:24px 24px;opacity:.35}

/* 布局：左侧固定，右侧滚动 */
.left{
  position:fixed; top:0; left:0; height:100vh; width:420px;
  padding:36px 32px; box-sizing:border-box;
  display:flex; flex-direction:column; gap:14px;
  background:linear-gradient(135deg,rgba(255,255,255,.03),rgba(255,255,255,.01));
  border-right:1px solid rgba(255,255,255,.08);
  backdrop-filter:saturate(120%) blur(2px)
}
.right{ margin-left:420px; padding:48px 60px; box-sizing:border-box; max-width:1000px }

/* 左侧元素 */
h1{color:var(--white);font-size:40px;margin:0;letter-spacing:.5px;position:relative}
h1::after{/* glitch 扫描条 */
  content:"";position:absolute;left:0;right:0;top:0;height:100%;
  background:linear-gradient(to bottom,transparent 0%,rgba(100,255,218,.06) 48%,transparent 52%,transparent 100%);
  mix-blend-mode:screen;animation:scan 5s linear infinite
}
@keyframes scan{0%{transform:translateY(-100%)}100%{transform:translateY(100%)}}
h2{margin:2px 0 0;font-size:20px;background:linear-gradient(90deg,var(--slate3),var(--acc));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.avatar{width:96px;height:96px;border-radius:50%;object-fit:cover;border:2px solid var(--navy2);margin:8px 0;box-shadow:0 0 0 2px rgba(100,255,218,.12)}
.subtitle{margin:6px 0 0;max-width:360px}
.dose-indicator{position:absolute;top:20px;right:20px;width:80px;height:4px;background:linear-gradient(90deg,#22c55e,#eab308,#ef4444);border-radius:2px;opacity:.7;filter:drop-shadow(0 0 6px rgba(100,255,218,.2))}

/* 社交按钮 */
.social{list-style:none;padding:0;margin:10px 0 0;display:flex;gap:10px;flex-wrap:wrap}
a{color:var(--acc);text-decoration:none;position:relative}
a::after{content:"";position:absolute;left:0;bottom:-2px;height:2px;width:100%;background:linear-gradient(90deg,var(--acc),var(--violet));transform:scaleX(0);transform-origin:left;transition:transform .2s}
a:hover::after{transform:scaleX(1)}
.chip{padding:8px 14px;border-radius:999px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.15);color:var(--slate3);transition:transform .15s, box-shadow .15s}
.chip:hover{transform:translateY(-1px);box-shadow:0 8px 24px rgba(100,255,218,.08) inset, 0 0 0 1px rgba(100,255,218,.25)}

/* 右侧内容 */
section{margin:80px 0}
.title{font-size:22px;color:var(--slate3);margin:0 0 20px;display:flex;gap:10px;align-items:center}
.title::before{content:attr(data-no) ".";color:var(--acc);font:600 16px "SF Mono","Fira Code",monospace}

/* 卡片：3D 微倾+霓虹描边 */
.card{
  background:linear-gradient(135deg,rgba(255,255,255,.06),rgba(255,255,255,.02));
  border:1px solid rgba(100,255,218,.18);
  border-radius:14px;padding:20px;margin:14px 0;
  transform-style:preserve-3d;will-change:transform, box-shadow;
  transition:transform .18s ease, box-shadow .18s ease, border-color .18s ease
}
.card:hover{
  border-color:rgba(100,255,218,.32);
  box-shadow:0 12px 40px rgba(0,0,0,.35), 0 0 24px rgba(100,255,218,.12)
}
.card h3{margin:0 0 8px;color:var(--white);font-size:18px}
.card .muted{color:var(--slate2);font:14px "SF Mono","Fira Code",monospace}

/* 渐显动画 */
.reveal{opacity:0; transform:translateY(12px); transition:opacity .5s ease, transform .5s ease}
.reveal.show{opacity:1; transform:none}

footer{margin:80px 0 40px;color:var(--slate2);font:12px "SF Mono","Fira Code",monospace;text-align:left}

/* 返回顶部 */
.to-top{position:fixed;right:20px;bottom:20px;opacity:0;pointer-events:none;background:rgba(255,255,255,.08);color:var(--slate3);border:1px solid rgba(255,255,255,.2);padding:10px 12px;border-radius:10px;transition:opacity .2s, transform .2s}
.to-top.show{opacity:1;pointer-events:auto}
.to-top:hover{transform:translateY(-2px)}

/* 自定义指针环 */
.cursor{
  position:fixed;left:0;top:0;width:28px;height:28px;border:1px solid rgba(100,255,218,.7);border-radius:50%;
  pointer-events:none;mix-blend-mode:screen;transform:translate(-50%,-50%);
  transition:width .12s,height .12s,border-color .12s,background .12s;z-index:9998
}
.cursor.focus{width:42px;height:42px;border-color:rgba(167,139,250,.8);background:radial-gradient(circle,rgba(167,139,250,.08),transparent 60%)}

/* 响应式 */
@media (max-width:1080px){
  .left{position:static;width:auto;height:auto;border-right:0}
  .right{margin-left:0;padding:32px 20px}
  #fx_particles{opacity:.7}
}
</style>
</head>
<body>
<canvas id="fx_particles"></canvas>
<div id="progress"></div>
<div class="bg-grid"></div>

<!-- 左侧固定栏 -->
<aside class="left">
  <div style="position:relative">
    <h1>Fan Xiao</h1>
    <h2>PhD student in Medical Physics</h2>
    <img src="assets/Fan.jpeg" alt="Fan Xiao" class="avatar">
    <div class="dose-indicator"></div>
  </div>
  <p class="subtitle">I'm a Phd student from LMU Munich. My research interests: AI dose calculation, MR-guided photon therapy, proton therapy.</p>
  <ul class="social">
    <li><a class="chip" href="https://lmu-art-lab.userweb.mwn.de/author/fan-xiao/" target="_blank">Lab</a></li>
    <li><a class="chip" href="https://scholar.google.de/citations?hl=de&pli=1&user=jhjXYpMAAAAJ" target="_blank">Scholar</a></li>
    <li><a class="chip" href="https://github.com/FansomX" target="_blank">GitHub</a></li>
    <li><a class="chip" id="copyMail">Email</a></li>
  </ul>
  <small id="toast" style="opacity:0;transition:opacity .2s;color:var(--slate2);margin-top:4px">已复制邮箱地址 ✓</small>
</aside>

<!-- 右侧滚动区 -->
<main class="right">
  <section id="projects" class="reveal">
    <h3 class="title" data-no="01">项目 (Projects)</h3>
    <article class="card" data-tilt>
      <h3><a href="https://github.com/FansomX/conv-lstm-bev-dose" target="_blank">ConvLSTM BEV Dose Prediction</a></h3>
      <p>从 BEV 预测 3D 剂量。ConvLSTM 捕获时空特征，实现快速准确。</p>
      <p class="muted">PyTorch · CuPy · CUDA</p>
    </article>
    <article class="card" data-tilt>
      <h3><a href="https://github.com/FansomX/geant4-segment-sim" target="_blank">Geant4 Segment Simulator</a></h3>
      <p>光子段蒙特卡洛模拟与剂量累积。</p>
      <p class="muted">C++ · Geant4 · ITK</p>
    </article>
    <article class="card" data-tilt>
      <h3><a href="https://github.com/FansomX/online-art-pipeline" target="_blank">Adaptive ART Pipeline</a></h3>
      <p>面向在线 ART 的毫秒级内核与管道。</p>
      <p class="muted">CUDA · HPC</p>
    </article>
  </section>

  <section id="publications" class="reveal">
    <h3 class="title" data-no="02">出版物 (Publications)</h3>
    <div class="card" data-tilt>
      <h3><a href="#" target="_blank">Unified comparative protocol for photon segment dose prediction</a></h3>
      <p>统一比较协议，标准化评估段剂量预测。</p>
      <p class="muted">Physica Medica, 2025 (under review)</p>
    </div>
    <div class="card" data-tilt>
      <h3><a href="#" target="_blank">Millisecond kernels for adaptive radiotherapy</a></h3>
      <p>毫秒级计算核心，提升在线计划效率。</p>
      <p class="muted">Medical Physics, 2024</p>
    </div>
  </section>

  <footer>© <span id="y"></span> Fan Xiao · Munich </footer>
</main>

<a href="#top" class="to-top" id="toTop">↑ Top</a>
<div class="cursor" id="cursor"></div>

<script>
/* 年份与滚动条 */
document.getElementById('y').textContent=new Date().getFullYear();
addEventListener('scroll',()=>{
  const h=document.documentElement;
  const p=100*h.scrollTop/(h.scrollHeight-h.clientHeight);
  document.getElementById('progress').style.width=p+'%';
  const btn=document.getElementById('toTop'); p>10?btn.classList.add('show'):btn.classList.remove('show');
},{passive:true});

/* 复制邮箱 */
document.getElementById('copyMail')?.addEventListener('click',e=>{
  e.preventDefault();
  const mail='Fan.Xiao@med.uni-muenchen.de';
  try{navigator.clipboard.writeText(mail);}catch{}
  const t=document.getElementById('toast'); t.style.opacity=1; setTimeout(()=>t.style.opacity=0,1800);
});

/* 粒子网络背景：自适应密度 */
(()=>{
  const c=document.getElementById('fx_particles'), ctx=c.getContext('2d');
  let dpr=Math.min(devicePixelRatio||1,2);
  let W,H,pts=[],N;

  function resize(){
    W=innerWidth; H=innerHeight; dpr=Math.min(devicePixelRatio||1,2);
    c.width=W*dpr; c.height=H*dpr; c.style.width=W+'px'; c.style.height=H+'px';
    ctx.setTransform(dpr,0,0,dpr,0,0);
    init();
  }

  function init(){
    const base = Math.max(W*H/22000, 60); // 基于面积
    N = Math.min(160, Math.floor(base));  // 上限保护
    pts = Array.from({length:N},()=>({
      x:Math.random()*W, y:Math.random()*H,
      vx:(Math.random()-.5)*0.6, vy:(Math.random()-.5)*0.6,
      r:Math.random()*1.8+0.6
    }));
  }

  function step(){
    ctx.clearRect(0,0,W,H);
    // 连接
    for(let i=0;i<N;i++){
      const a=pts[i];
      for(let j=i+1;j<N;j++){
        const b=pts[j];
        const dx=a.x-b.x, dy=a.y-b.y; const d=dx*dx+dy*dy;
        if(d<110*110){
          const o = 1 - d/(110*110);
          ctx.strokeStyle=`rgba(100,255,218,${0.08*o})`;
          ctx.lineWidth=1;
          ctx.beginPath(); ctx.moveTo(a.x,a.y); ctx.lineTo(b.x,b.y); ctx.stroke();
        }
      }
    }
    // 点
    for(const p of pts){
      p.x+=p.vx; p.y+=p.vy;
      if(p.x<-20)p.x=W+20; if(p.x>W+20)p.x=-20;
      if(p.y<-20)p.y=H+20; if(p.y>H+20)p.y=-20;
      ctx.beginPath();
      ctx.fillStyle='rgba(167,139,250,.9)';
      ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
      ctx.fill();
      ctx.beginPath();
      ctx.fillStyle='rgba(100,255,218,.9)';
      ctx.arc(p.x+0.7,p.y+0.5,p.r*0.5,0,Math.PI*2);
      ctx.fill();
    }
    requestAnimationFrame(step);
  }

  addEventListener('resize', resize);
  resize(); step();
})();

/* 卡片 3D 微倾 */
(()=>{
  const cards=[...document.querySelectorAll('[data-tilt]')];
  const max=8; // 最大旋转角度（度）
  cards.forEach(card=>{
    card.addEventListener('mousemove',e=>{
      const r=card.getBoundingClientRect();
      const x=(e.clientX - r.left)/r.width, y=(e.clientY - r.top)/r.height;
      const rx=(y-0.5)*-max, ry=(x-0.5)*max;
      card.style.transform=`perspective(800px) rotateX(${rx}deg) rotateY(${ry}deg) translateZ(0)`;
    });
    card.addEventListener('mouseleave',()=> card.style.transform='');
  });
})();

/* 滚动渐显 */
(()=>{
  const obs=new IntersectionObserver(es=>{
    es.forEach(e=>{ if(e.isIntersecting){ e.target.classList.add('show'); obs.unobserve(e.target);} });
  },{threshold:.12});
  document.querySelectorAll('.reveal').forEach(el=>obs.observe(el));
})();

/* 自定义指针环（悬停按钮/链接放大） */
(()=>{
  const c=document.getElementById('cursor');
  let x=innerWidth/2, y=innerHeight/2, tx=x, ty=y;
  function move(){ x += (tx-x)*0.2; y += (ty-y)*0.2; c.style.transform=`translate(${x}px, ${y}px)`; requestAnimationFrame(move); }
  addEventListener('mousemove',e=>{ tx=e.clientX; ty=e.clientY; });
  move();
  const focusSel='a, .chip, .card';
  addEventListener('mouseover',e=>{ if(e.target.closest(focusSel)) c.classList.add('focus'); });
  addEventListener('mouseout',e=>{ if(e.target.closest(focusSel)) c.classList.remove('focus'); });
})();

/* 键盘可达性：Tab 时隐藏自定义指针避免干扰可见焦点 */
(()=>{
  let viaMouse=true;
  addEventListener('keydown',e=>{ if(e.key==='Tab'){ viaMouse=false; document.getElementById('cursor').style.display='none'; }});
  addEventListener('mousedown',()=>{ if(!viaMouse){ viaMouse=true; document.getElementById('cursor').style.display='block'; }});
})();
</script>
</body>
</html>
